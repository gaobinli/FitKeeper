import{r as q,a as k,k as G,l as V,d as x,m as H,u as L,n as F,p as $,q as I,$ as u,c as z,o as P,w as a,f as e,s as B,v as M,h as t,e as C,x as T,g as y,B as E,t as N,y as D,z as K,A as W,C as j,R as J,b as O,D as Q,E as X,F as Y,G as S,H as Z,I as ee,J as oe,T as ne,K as ae,L as le,M as se,N as te}from"./index-BAq2SbaD.js";import{_ as re,a as de}from"./RadioGroup-BGb2VClf.js";function ue(b){const c=q(0),h=k(()=>Math.ceil(c.value/60)),l=k(()=>c.value>0),{pause:p,resume:_}=G(()=>{c.value>0?c.value-=1:p()},{immediate:!1});function m(r=b){c.value=60*r,_()}function n(){c.value=0,p()}return V(()=>{p()}),{count:h,isCounting:l,start:m,stop:n}}const pe={class:"w-full flex-y-center gap-16px"},ce=["src"],ie={class:"w-full"},me={class:"text-right"},fe=x({name:"PwdLogin",__name:"pwd-login",setup(b){const v=H(),{toggleLoginModule:c}=L(),{formRef:h,validate:l}=F(),p=$({userName:"admin",password:"123456",uuid:"",code:"1234",codeUrl:"",roleType:1}),_=k(()=>{const{defaultRequiredRule:r}=I();return{userName:r,password:r,code:r}});async function m(){const{error:r,data:o}=await W();console.log("========code====>",o),p.uuid=o.uuid,p.codeUrl="data:image/gif;base64,"+o.img}m();async function n(){await l(),await v.login(p.userName,p.password,p.uuid,p.code,p.roleType)}return k(()=>[{key:"super",label:u("page.login.pwdLogin.superAdmin"),userName:"Super",password:"123456"},{key:"admin",label:u("page.login.pwdLogin.admin"),userName:"Admin",password:"123456"},{key:"user",label:u("page.login.pwdLogin.user"),userName:"User",password:"123456"}]),(r,o)=>{const d=M,s=B,g=de,i=T,w=re,R=E,U=K;return P(),z(U,{ref_key:"formRef",ref:h,model:p,rules:_.value,size:"large","show-label":!1,onKeyup:D(n,["enter"])},{default:a(()=>[e(s,{path:"userName"},{default:a(()=>[e(d,{value:p.userName,"onUpdate:value":o[0]||(o[0]=f=>p.userName=f),placeholder:t(u)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(s,{path:"password"},{default:a(()=>[e(d,{value:p.password,"onUpdate:value":o[1]||(o[1]=f=>p.password=f),type:"password","show-password-on":"click",placeholder:t(u)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(s,{path:"code"},{default:a(()=>[C("div",pe,[e(d,{value:p.code,"onUpdate:value":o[2]||(o[2]=f=>p.code=f),placeholder:t(u)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),C("img",{src:p.codeUrl,style:{cursor:"pointer"},onClick:o[3]||(o[3]=f=>m()),class:"login-code-img"},null,8,ce)])]),_:1}),e(s,{label:"登录角色",path:"roleType"},{default:a(()=>[e(w,{value:p.roleType,"onUpdate:value":o[4]||(o[4]=f=>p.roleType=f)},{default:a(()=>[e(i,null,{default:a(()=>[e(g,{value:1},{default:a(()=>o[6]||(o[6]=[y("管理员")])),_:1}),e(g,{value:2},{default:a(()=>o[7]||(o[7]=[y("教练")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{vertical:"",size:24},{default:a(()=>[C("div",ie,[e(R,{type:"primary",size:"large",round:"",block:"",loading:t(v).loginLoading,onClick:n},{default:a(()=>[y(N(t(u)("common.confirm")),1)]),_:1},8,["loading"])]),C("div",me,[e(R,{type:"text",size:"small",onClick:o[5]||(o[5]=f=>t(c)("coach-register"))},{default:a(()=>o[8]||(o[8]=[y(" 教练注册 ")])),_:1})])]),_:1})]),_:1},8,["model","rules"])}}});function A(){const{loading:b,startLoading:v,endLoading:c}=j(),{count:h,start:l,stop:p,isCounting:_}=ue(10),m=k(()=>{let o=u("page.login.codeLogin.getCode");const d=u("page.login.codeLogin.reGetCode",{time:h.value});return b.value&&(o=""),_.value&&(o=d),o});function n(o){var d,s,g,i;return o.trim()===""?((s=(d=window.$message)==null?void 0:d.error)==null||s.call(d,u("form.phone.required")),!1):J.test(o)?!0:((i=(g=window.$message)==null?void 0:g.error)==null||i.call(g,u("form.phone.invalid")),!1)}async function r(o){var s,g;!n(o)||b.value||(v(),await new Promise(i=>{setTimeout(i,500)}),(g=(s=window.$message)==null?void 0:s.success)==null||g.call(s,u("page.login.codeLogin.sendCodeSuccess")),l(),c())}return{label:m,start:l,stop:p,isCounting:_,loading:b,getCaptcha:r}}const ge={class:"w-full flex-y-center gap-16px"},_e=x({name:"CodeLogin",__name:"code-login",setup(b){const{toggleLoginModule:v}=L(),{formRef:c,validate:h}=F(),{label:l,isCounting:p,loading:_,getCaptcha:m}=A(),n=$({phone:"",code:""}),r=k(()=>{const{formRules:d}=I();return{phone:d.phone,code:d.code}});async function o(){var d;await h(),(d=window.$message)==null||d.success(u("page.login.common.validateSuccess"))}return(d,s)=>{const g=M,i=B,w=E,R=T,U=K;return P(),z(U,{ref_key:"formRef",ref:c,model:n,rules:r.value,size:"large","show-label":!1,onKeyup:D(o,["enter"])},{default:a(()=>[e(i,{path:"phone"},{default:a(()=>[e(g,{value:n.phone,"onUpdate:value":s[0]||(s[0]=f=>n.phone=f),placeholder:t(u)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(i,{path:"code"},{default:a(()=>[C("div",ge,[e(g,{value:n.code,"onUpdate:value":s[1]||(s[1]=f=>n.code=f),placeholder:t(u)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),e(w,{size:"large",disabled:t(p),loading:t(_),onClick:s[2]||(s[2]=f=>t(m)(n.phone))},{default:a(()=>[y(N(t(l)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(R,{vertical:"",size:18,class:"w-full"},{default:a(()=>[e(w,{type:"primary",size:"large",round:"",block:"",onClick:o},{default:a(()=>[y(N(t(u)("common.confirm")),1)]),_:1}),e(w,{size:"large",round:"",block:"",onClick:s[3]||(s[3]=f=>t(v)("pwd-login"))},{default:a(()=>[y(N(t(u)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),we={class:"w-full flex-y-center gap-16px"},ve=x({name:"Register",__name:"register",setup(b){const{toggleLoginModule:v}=L(),{formRef:c,validate:h}=F(),{label:l,isCounting:p,loading:_,getCaptcha:m}=A(),n=$({phone:"",code:"",password:"",confirmPassword:""}),r=k(()=>{const{formRules:d,createConfirmPwdRule:s}=I();return{phone:d.phone,code:d.code,password:d.pwd,confirmPassword:s(n.password)}});async function o(){var d;await h(),(d=window.$message)==null||d.success(u("page.login.common.validateSuccess"))}return(d,s)=>{const g=M,i=B,w=E,R=T,U=K;return P(),z(U,{ref_key:"formRef",ref:c,model:n,rules:r.value,size:"large","show-label":!1,onKeyup:D(o,["enter"])},{default:a(()=>[e(i,{path:"phone"},{default:a(()=>[e(g,{value:n.phone,"onUpdate:value":s[0]||(s[0]=f=>n.phone=f),placeholder:t(u)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(i,{path:"code"},{default:a(()=>[C("div",we,[e(g,{value:n.code,"onUpdate:value":s[1]||(s[1]=f=>n.code=f),placeholder:t(u)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),e(w,{size:"large",disabled:t(p),loading:t(_),onClick:s[2]||(s[2]=f=>t(m)(n.phone))},{default:a(()=>[y(N(t(l)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(i,{path:"password"},{default:a(()=>[e(g,{value:n.password,"onUpdate:value":s[3]||(s[3]=f=>n.password=f),type:"password","show-password-on":"click",placeholder:t(u)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(i,{path:"confirmPassword"},{default:a(()=>[e(g,{value:n.confirmPassword,"onUpdate:value":s[4]||(s[4]=f=>n.confirmPassword=f),type:"password","show-password-on":"click",placeholder:t(u)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(R,{vertical:"",size:18,class:"w-full"},{default:a(()=>[e(w,{type:"primary",size:"large",round:"",block:"",onClick:o},{default:a(()=>[y(N(t(u)("common.confirm")),1)]),_:1}),e(w,{size:"large",round:"",block:"",onClick:s[5]||(s[5]=f=>t(v)("pwd-login"))},{default:a(()=>[y(N(t(u)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),he=x({name:"ResetPwd",__name:"reset-pwd",setup(b){const{toggleLoginModule:v}=L(),{formRef:c,validate:h}=F(),l=$({phone:"",code:"",password:"",confirmPassword:""}),p=k(()=>{const{formRules:m,createConfirmPwdRule:n}=I();return{phone:m.phone,password:m.pwd,confirmPassword:n(l.password)}});async function _(){var m;await h(),(m=window.$message)==null||m.success(u("page.login.common.validateSuccess"))}return(m,n)=>{const r=M,o=B,d=E,s=T,g=K;return P(),z(g,{ref_key:"formRef",ref:c,model:l,rules:p.value,size:"large","show-label":!1,onKeyup:D(_,["enter"])},{default:a(()=>[e(o,{path:"phone"},{default:a(()=>[e(r,{value:l.phone,"onUpdate:value":n[0]||(n[0]=i=>l.phone=i),placeholder:t(u)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(o,{path:"code"},{default:a(()=>[e(r,{value:l.code,"onUpdate:value":n[1]||(n[1]=i=>l.code=i),placeholder:t(u)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(o,{path:"password"},{default:a(()=>[e(r,{value:l.password,"onUpdate:value":n[2]||(n[2]=i=>l.password=i),type:"password","show-password-on":"click",placeholder:t(u)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(o,{path:"confirmPassword"},{default:a(()=>[e(r,{value:l.confirmPassword,"onUpdate:value":n[3]||(n[3]=i=>l.confirmPassword=i),type:"password","show-password-on":"click",placeholder:t(u)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(s,{vertical:"",size:18,class:"w-full"},{default:a(()=>[e(d,{type:"primary",size:"large",round:"",block:"",onClick:_},{default:a(()=>[y(N(t(u)("common.confirm")),1)]),_:1}),e(d,{size:"large",round:"",block:"",onClick:n[4]||(n[4]=i=>t(v)("pwd-login"))},{default:a(()=>[y(N(t(u)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ye=x({name:"BindWechat",__name:"bind-wechat",setup(b){return(v,c)=>(P(),O("div"))}}),be=x({name:"CoachRegister",__name:"coach-register",setup(b){const{toggleLoginModule:v}=L(),{formRef:c,validate:h}=F(),l=$({name:"",username:"",password:"",confirmPassword:"",phone:""}),p=k(()=>{const{formRules:n,createConfirmPwdRule:r,defaultRequiredRule:o}=I();return{name:o,username:o,password:n.pwd,confirmPassword:r(l.password),phone:n.phone}}),_=$({submit:!1});async function m(){var n;await h(),_.submit=!0;try{const r={name:l.name,username:l.username,password:l.password,phone:l.phone,enable:0},{error:o}=await Q(r);o||((n=window.$message)==null||n.success("注册成功，请返回登录"),v("pwd-login"))}finally{_.submit=!1}}return(n,r)=>{const o=M,d=B,s=E,g=T,i=K;return P(),z(i,{ref_key:"formRef",ref:c,model:l,rules:p.value,size:"large","show-label":!1,onKeyup:D(m,["enter"])},{default:a(()=>[e(d,{path:"name"},{default:a(()=>[e(o,{value:l.name,"onUpdate:value":r[0]||(r[0]=w=>l.name=w),placeholder:"姓名"},null,8,["value"])]),_:1}),e(d,{path:"username"},{default:a(()=>[e(o,{value:l.username,"onUpdate:value":r[1]||(r[1]=w=>l.username=w),placeholder:"账号"},null,8,["value"])]),_:1}),e(d,{path:"password"},{default:a(()=>[e(o,{value:l.password,"onUpdate:value":r[2]||(r[2]=w=>l.password=w),type:"password","show-password-on":"click",placeholder:"密码"},null,8,["value"])]),_:1}),e(d,{path:"confirmPassword"},{default:a(()=>[e(o,{value:l.confirmPassword,"onUpdate:value":r[3]||(r[3]=w=>l.confirmPassword=w),type:"password","show-password-on":"click",placeholder:"确认密码"},null,8,["value"])]),_:1}),e(d,{path:"phone"},{default:a(()=>[e(o,{value:l.phone,"onUpdate:value":r[4]||(r[4]=w=>l.phone=w),placeholder:"手机号"},null,8,["value"])]),_:1}),e(g,{vertical:"",size:18,class:"w-full"},{default:a(()=>[e(s,{type:"primary",size:"large",round:"",block:"",loading:_.submit,onClick:m},{default:a(()=>[y(N(t(u)("common.confirm")),1)]),_:1},8,["loading"]),e(s,{size:"large",round:"",block:"",onClick:r[5]||(r[5]=w=>t(v)("pwd-login"))},{default:a(()=>[y(N(t(u)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ce={class:"w-400px lt-sm:w-300px"},ke={class:"flex-y-center justify-between"},Ne={class:"i-flex-col"},Pe={class:"pt-24px"},xe={class:"text-18px text-primary font-medium"},Re={class:"pt-24px"},Se=x({name:"login",__name:"index",props:{module:{}},setup(b){const v=b;X();const c=Y(),h={"pwd-login":{label:S["pwd-login"],component:fe},"code-login":{label:S["code-login"],component:_e},register:{label:S.register,component:ve},"reset-pwd":{label:S["reset-pwd"],component:he},"bind-wechat":{label:S["bind-wechat"],component:ye},"coach-register":{label:S["coach-register"],component:be}},l=k(()=>h[v.module||"pwd-login"]);k(()=>c.darkMode?Z(c.themeColor,600):c.themeColor);const p=k(()=>{const _="#ffffff",m=c.darkMode?.5:.2;return ee(_,c.themeColor,m)});return(_,m)=>{const n=oe,r=le;return P(),O("div",{class:"relative size-full flex-center overflow-hidden bgImg",style:se({backgroundColor:p.value})},[e(r,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:a(()=>[C("div",Ce,[C("header",ke,[m[0]||(m[0]=C("h3",{class:"text-28px text-primary font-500 lt-sm:text-22px"},"健身房管理系统",-1)),C("div",Ne,[e(n,{"theme-schema":t(c).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:t(c).toggleThemeScheme},null,8,["theme-schema","onSwitch"])])]),C("main",Pe,[C("h3",xe,N(t(u)(l.value.label)),1),C("div",Re,[e(ne,{name:t(c).page.animateMode,mode:"out-in",appear:""},{default:a(()=>[(P(),z(ae(l.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}}),Ue=te(Se,[["__scopeId","data-v-6f898ac0"]]);export{Ue as default};
