import{E as ie}from"./index-BgyTeVoR.js";const V=(n,t)=>Object.prototype.toString.call(n)===`[object ${t}]`,Re=(n,t=!1)=>t?typeof n=="boolean":n===!0||n===!1||V(n,"Boolean"),ne=n=>typeof n=="function",g=n=>n==null,m=n=>n!=null,xt=n=>{const t=typeof n;return n!==null&&t==="object"||t==="function"},Fe=n=>typeof n=="object"&&n!==null,wt=function(n){if(!Fe(n)||!V(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t},Li=n=>n===void 0,it=(n,t=!1)=>{const i=typeof n;return t?i==="string":i==="string"||V(n,"String")},b=n=>Array.isArray?Array.isArray(n):V(n,"Array"),St=function(n){return n!==null&&typeof n!="function"&&Number.isFinite(n.length)},De=n=>V(n,"Date"),v=(n,t=!1)=>{const i=typeof n;return t?i==="number":i==="number"||V(n,"Number")},se=n=>v(n)&&Number.isFinite(n),Pi=n=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(n),Hi=n=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(n),ke=n=>({}).toString.call(n).replace(/^\[object /,"").replace(/]$/,""),Ae=Object.prototype,Ie=function(n){const t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||Ae)},Ne=Object.prototype.hasOwnProperty;function zi(n){if(g(n))return!0;if(St(n))return!n.length;const t=ke(n);if(t==="Map"||t==="Set")return!n.size;if(Ie(n))return!Object.keys(n).length;for(const i in n)if(Ne.call(n,i))return!1;return!0}const Wi=(n,t,i)=>{const e=it(t)?t.split("."):t;for(let s=0;s<e.length;s++)n=n?n[e[s]]:void 0;return n===void 0?i:n},Ce=Object.prototype.hasOwnProperty,qi=(n,t)=>n!=null&&Ce.call(n,t);function re(n,t,i){let e;if(!m(n)||typeof n!="object"||t)return n;const s=b(n),r=n.length;e=s?new Array(r):typeof n=="object"?{}:Re(n)||v(n)||it(n)?n:De(n)?new Date(+n):void 0;const a=s?void 0:Object.keys(Object(n));let h=-1;if(e)for(;++h<(a||n).length;){const o=a?a[h]:h,l=n[o];e[o]=re(l,t)}return e}function ae(n,t,i=!1,e=!1){if(t){if(n===t)return;if(m(t)&&typeof t=="object"){const s=Object(t),r=[];for(const o in s)r.push(o);let{length:a}=r,h=-1;for(;a--;){const o=r[++h];!m(s[o])||typeof s[o]!="object"||e&&b(n[o])?he(n,o,s[o]):Be(n,t,o,i,e)}}}}function Be(n,t,i,e=!1,s=!1){const r=n[i],a=t[i];let h=t[i],o=!0;if(b(a)){if(e)h=[];else if(b(r))h=r;else if(St(r)){h=new Array(r.length);let l=-1;const c=r.length;for(;++l<c;)h[l]=r[l]}}else wt(a)?(h=r??{},typeof r!="function"&&typeof r=="object"||(h={})):o=!1;o&&ae(h,a,e,s),he(n,i,h)}function he(n,t,i){(i!==void 0&&!Oe(n[t],i)||i===void 0&&!(t in n))&&(n[t]=i)}function Oe(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function Ve(n,...t){let i=-1;const e=t.length;for(;++i<e;)ae(n,t[i],!0);return n}function Ui(n,t){if(!n||!wt(n))return n;const i={};return Object.keys(n).forEach(e=>{const s=n[e];let r=!1;t.forEach(a=>{(it(a)&&a===e||a instanceof RegExp&&e.match(a))&&(r=!0)}),r||(i[e]=s)}),i}function Ot(n){return Object.prototype.toString.call(n)}function Vt(n){return Object.keys(n)}function Lt(n,t,i){if(n===t)return!0;if(typeof n!=typeof t||n==null||t==null)return!1;if(Number.isNaN(n)&&Number.isNaN(t))return!0;if(Ot(n)!==Ot(t)||ne(n)||typeof n!="object")return!1;if(b(n)){if(n.length!==t.length)return!1;for(let r=n.length-1;r>=0;r--)if(!Lt(n[r],t[r]))return!1;return!0}if(!wt(n))return!1;const e=Vt(n),s=Vt(t);if(e.length!==s.length)return!1;e.sort(),s.sort();for(let r=e.length-1;r>=0;r--)if(e[r]!=s[r])return!1;for(let r=e.length-1;r>=0;r--){const a=e[r];if(!Lt(n[a],t[a]))return!1}return!0}function Le(n){if(!n)return[];if(Object.keys)return Object.keys(n);const t=[];for(const i in n)n.hasOwnProperty(i)&&t.push(i);return t}function Pe(n,t,i){const e=Le(t);for(let s=0;s<e.length;s++){const r=e[s];(i?t[r]!=null:n[r]==null)&&(n[r]=t[r])}return n}function oe(n,t,i=!0){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const e=Object.getOwnPropertyNames(t);for(let s=0;s<e.length;s++){const r=e[s];r!=="constructor"&&(i?t[r]!=null:n[r]==null)&&(n[r]=t[r])}}else Pe(n,t,i)}function He(n){return m(n)?b(n)?n:[n]:[]}function ji(n){if(St(n))return n[n.length-1]}const $i=(n,t)=>{var i;if(n.length===0)return;let e=n[0];for(let s=1;s<n.length;s++){const r=n[s];((i=t==null?void 0:t(r,e))!==null&&i!==void 0?i:r-e>0)&&(e=r)}return e},Xi=(n,t)=>{var i;if(n.length===0)return;let e=n[0];for(let s=1;s<n.length;s++){const r=n[s];((i=t==null?void 0:t(r,e))!==null&&i!==void 0?i:r-e<0)&&(e=r)}return e};function Gi(n,t){if(!b(n)||!b(t)||n.length!==t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}function Yi(n){return n&&b(n)?Array.from(new Set(He(n))):n}function Zi(n,t=Math.random){let i,e,s=n.length;for(;s;)i=Math.floor(t()*s),e=n[--s],n[s]=n[i],n[i]=e;return n}function ze(n){if(!b(n))return[n];const t=[];for(const i of n)t.push(...ze(i));return t}function We(n,t,i){m(t)||(t=n,n=0),m(i)||(i=1);let e=-1;const s=0|Math.max(0,Math.ceil((t-n)/i)),r=new Array(s);for(;++e<s;)r[e]=n+e*i;return r}function qe(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function L(n){return Number(n)}const Ue=typeof console<"u";function W(n,t,i){const e=[t].concat([].slice.call(i));Ue&&console[n].apply(console,e)}var D;(function(n){n[n.None=0]="None",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"})(D||(D={}));class E{static getInstance(t,i){return E._instance&&v(t)?E._instance.level(t):E._instance||(E._instance=new E(t,i)),E._instance}static setInstance(t){return E._instance=t}static setInstanceLevel(t){E._instance?E._instance.level(t):E._instance=new E(t)}static clearInstance(){E._instance=null}constructor(t=D.None,i){this._onErrorHandler=[],this._level=t,this._method=i}addErrorHandler(t){this._onErrorHandler.find(i=>i===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){const i=this._onErrorHandler.findIndex(e=>e===t);i<0||this._onErrorHandler.splice(i,1)}callErrorHandler(...t){this._onErrorHandler.forEach(i=>i(...t))}canLogInfo(){return this._level>=D.Info}canLogDebug(){return this._level>=D.Debug}canLogError(){return this._level>=D.Error}canLogWarn(){return this._level>=D.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var i;return this._level>=D.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):W((i=this._method)!==null&&i!==void 0?i:"error","ERROR",t)),this}warn(...t){return this._level>=D.Warn&&W(this._method||"warn","WARN",t),this}info(...t){return this._level>=D.Info&&W(this._method||"log","INFO",t),this}debug(...t){return this._level>=D.Debug&&W(this._method||"log","DEBUG",t),this}}E._instance=null;function je(n,t,i=0,e){for(g(e)&&(e=n.length);i<e;){const s=i+e>>>1;qe(n[s],t)>0?e=s:i=s+1}return i}const Ki=(n,t)=>$e(0,n.length,i=>t(n[i])),$e=(n,t,i)=>{let e=n,s=t;for(;e<s;){const r=Math.floor((e+s)/2);i(r)>=0?s=r:e=r+1}return e},Xe=1e-10,Ge=1e-10;function le(n,t,i=Ge,e=Xe){const s=e,r=i*Math.max(n,t);return Math.abs(n-t)<=Math.max(s,r)}function Pt(n,t,i,e){return n>t&&!le(n,t,i,e)}function Ht(n,t,i,e){return n<t&&!le(n,t,i,e)}const z=n=>{let t=null,i=null;return(...e)=>(t&&e.every((s,r)=>s===t[r])||(t=e,i=n(...e)),i)},ce=function(n,t,i){return n<t?t:n>i?i:n},Qi=(n,t,i)=>{let[e,s]=n;s<e&&(e=n[1],s=n[0]);const r=s-e;return r>=i-t?[t,i]:(e=Math.min(Math.max(e,t),i-r),[e,e+r])};function vt(n,t){let i;return n>t&&(i=n,n=t,t=i),e=>Math.max(n,Math.min(t,e))}let Z=!1;try{Z=typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"}catch{Z=!1}function Ye(n,t,i){let e,s,r,a,h,o,l=0,c=!1,u=!1,f=!0;const _=!t&&t!==0&&Z;if(typeof n!="function")throw new TypeError("Expected a function");function d(y){const S=e,I=s;return e=s=void 0,l=y,a=n.apply(I,S),a}function p(y,S){return _?(cancelAnimationFrame(h),requestAnimationFrame(y)):setTimeout(y,S)}function M(y){const S=y-o;return o===void 0||S>=t||S<0||u&&y-l>=r}function x(){const y=Date.now();if(M(y))return A(y);h=p(x,function(S){const I=S-l,F=t-(S-o);return u?Math.min(F,r-I):F}(y))}function A(y){return h=void 0,f&&e?d(y):(e=s=void 0,a)}function R(...y){const S=Date.now(),I=M(S);if(e=y,s=this,o=S,I){if(h===void 0)return function(F){return l=F,h=p(x,t),c?d(F):a}(o);if(u)return h=p(x,t),d(o)}return h===void 0&&(h=p(x,t)),a}return t=+t||0,xt(i)&&(c=!!i.leading,u="maxWait"in i,u&&(r=Math.max(se(i.maxWait)?i.maxWait:0,t)),f="trailing"in i?!!i.trailing:f),R.cancel=function(){h!==void 0&&function(y){if(_)return cancelAnimationFrame(y);clearTimeout(y)}(h),l=0,e=o=s=h=void 0},R.flush=function(){return h===void 0?a:A(Date.now())},R.pending=function(){return h!==void 0},R}Z=!1;function Ji(n,t,i){let e=!0,s=!0;if(typeof n!="function")throw new TypeError("Expected a function");return xt(i)&&(e="leading"in i?!!i.leading:e,s="trailing"in i?!!i.trailing:s),Ye(n,t,{leading:e,trailing:s,maxWait:t})}function H(n,t){return i=>n*(1-i)+t*i}function Ze(n,t){return function(i){return Math.round(n*(1-i)+t*i)}}function Ke(n,t){const i=n.valueOf(),e=t.valueOf(),s=new Date;return r=>(s.setTime(i*(1-r)+e*r),s)}const gt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,st=new RegExp(gt.source,"g");function Qe(n){return function(){return n}}function Je(n){return function(t){return n(t)+""}}function tn(n,t){let i,e,s,r=gt.lastIndex=st.lastIndex=0,a=-1;const h=[],o=[];for(n+="",t+="";(i=gt.exec(n))&&(e=st.exec(t));)(s=e.index)>r&&(s=t.slice(r,s),h[a]?h[a]+=s:h[++a]=s),(i=i[0])===(e=e[0])?h[a]?h[a]+=e:h[++a]=e:(h[++a]=null,o.push({i:a,x:H(i,e)})),r=st.lastIndex;return r<t.length&&(s=t.slice(r),h[a]?h[a]+=s:h[++a]=s),h.length<2?o[0]?Je(o[0].x):Qe(t):(t=o.length,function(l){for(let c,u=0;u<t;++u)h[(c=o[u]).i]=c.x(l);return h.join("")})}const en=1e-12,Et=Math.PI,K=Et/2,q=2*Et,U=2*Math.PI,zt=Math.abs,nn=Math.atan2,ti=Math.cos,sn=Math.max,rn=Math.min,ei=Math.sin,rt=Math.sqrt,C=Math.pow;function an(n){return n>1?0:n<-1?Et:Math.acos(n)}function hn(n){return n>=1?K:n<=-1?-K:Math.asin(n)}function on(n,t,i,e,s){let r=i,a=e;return typeof n=="number"&&typeof i=="number"&&(r=(1-s)*n+s*i),typeof t=="number"&&typeof e=="number"&&(a=(1-s)*t+s*e),{x:r,y:a}}function Wt(n,t){return n[0]*t[1]-n[1]*t[0]}function ii(n,t){return zt(n[0]-t[0])+zt(n[1]-t[1])<1e-12}function ue(n,t=10){return Math.round(n*t)/t}function Q(n){const t=n.toString().split(/[eE]/),i=(t[0].split(".")[1]||"").length-(+t[1]||0);return i>0?i:0}function ln(n,t){return ue(n+t,10**Math.max(Q(n),Q(t)))}function cn(n,t){return ue(n-t,10**Math.max(Q(n),Q(t)))}class Tt{constructor(t=0,i=0,e,s){this.x=0,this.y=0,this.x=t,this.y=i,this.x1=e,this.y1=s}clone(){return new Tt(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,i){return this.x=t,this.y=i,this}add(t){return v(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return v(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw new Error("暂不支持")}div(t){throw new Error("暂不支持")}}class un{static distancePP(t,i){return rt(C(t.x-i.x,2)+C(t.y-i.y,2))}static distanceNN(t,i,e,s){return rt(C(t-e,2)+C(i-s,2))}static distancePN(t,i,e){return rt(C(i-t.x,2)+C(e-t.y,2))}static pointAtPP(t,i,e){return new Tt((i.x-t.x)*e+t.x,(i.y-t.y)*e+t.y)}}function P(n){return n*(Math.PI/180)}function ni(n){return 180*n/Math.PI}const si=(n=0)=>{if(n<0)for(;n<-q;)n+=q;else if(n>0)for(;n>q;)n-=q;return n},fn=si;function dn(n,t,i){return t?{x:n.x+t*Math.cos(i),y:n.y+t*Math.sin(i)}:{x:n.x,y:n.y}}function mn(n,t={x:0,y:0},i=0,e=2*Math.PI){const{x:s,y:r}=n,{x:a,y:h}=t;let o=s-a,l=r-h;const c=Math.sqrt(o*o+l*l);if(c===0)return{radius:0,angle:0};o/=c,l/=c;let u=Math.atan2(l,o);if(u<i)for(;u<=i;)u+=2*Math.PI;if(u>e)for(;u>=e;)u-=2*Math.PI;return{radius:c,angle:u}}function gn(n,t){return Math.atan2(t.y-n.y,t.x-n.x)}function fe(n){for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;return n}function ri(n,t){const i=Math.abs(t-n);if(i>=2*Math.PI||2*Math.PI-i<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];const e=fe(Math.min(n,t)),s=e+i,r=[e,s];let a=Math.floor(e/Math.PI)*Math.PI/2;for(;a<s;)a>e&&r.push(a),a+=Math.PI/2;return r}function _n(n,t,i,e){const{x:s,y:r}=t,a=ri(i,e),{width:h,height:o}=n,l=[];return a.forEach(c=>{const u=Math.sin(c),f=Math.cos(c);u===1?l.push(o-r):u===-1?l.push(r):f===1?l.push(h-s):f===-1?l.push(s):(u>0?l.push(Math.abs((o-r)/u)):l.push(Math.abs(r/u)),f>0?l.push(Math.abs((h-s)/f)):l.push(Math.abs(s/f)))}),Math.min.apply(null,l)}function pn(n){return(n=fe(n))>0&&n<=Math.PI/2?2:n>Math.PI/2&&n<=Math.PI?3:n>Math.PI&&n<=3*Math.PI/2?4:1}function at(n,t,i){n[0]=t[0]-i[0],n[1]=t[1]-i[1]}function ai(n,t,i,e){let s=n[0],r=t[0],a=i[0],h=e[0];return r<s&&([s,r]=[r,s]),h<a&&([h,a]=[a,h]),!(r<a||h<s)&&(s=n[1],r=t[1],a=i[1],h=e[1],r<s&&([s,r]=[r,s]),h<a&&([h,a]=[a,h]),!(r<a||h<s))}function yn(n,t,i,e){if(!ai(n,t,i,e))return!1;const s=[0,0],r=[0,0],a=[0,0];if(at(s,t,n),at(r,e,i),ii(s,r))return!0;at(a,i,n);const h=Wt(a,r)/Wt(s,r);return h>=0&&h<=1&&[n[0]+s[0]*h,n[1]+s[1]*h]}function Mn(n,t,i){if(n===null)return t;if(t===null)return n;const{x11:e,x12:s,y11:r,y12:a,x21:h,x22:o,y21:l,y22:c}=bt(n,t,i);return e>=o||s<=h||r>=c||a<=l?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(e,h),y1:Math.max(r,l),x2:Math.min(s,o),y2:Math.min(a,c)}}var O;(function(n){n[n.NONE=0]="NONE",n[n.BBOX1=1]="BBOX1",n[n.BBOX2=2]="BBOX2"})(O||(O={}));const bt=(n,t,i)=>{let e=n.x1,s=n.x2,r=n.y1,a=n.y2,h=t.x1,o=t.x2,l=t.y1,c=t.y2;return i&&(e>s&&([e,s]=[s,e]),r>a&&([r,a]=[a,r]),h>o&&([h,o]=[o,h]),l>c&&([l,c]=[c,l])),{x11:e,x12:s,y11:r,y12:a,x21:h,x22:o,y21:l,y22:c}};function xn(n,t,i){if(!n||!t)return O.NONE;const{x11:e,x12:s,y11:r,y12:a,x21:h,x22:o,y21:l,y22:c}=bt(n,t,i);return e>h&&s<o&&r>l&&a<c?O.BBOX1:h>e&&o<s&&l>r&&c<a?O.BBOX2:O.NONE}function wn(n,t,i){if(n&&t){if(!i)return!(n.x1>t.x2||n.x2<t.x1||n.y1>t.y2||n.y2<t.y1);const{x11:e,x12:s,y11:r,y12:a,x21:h,x22:o,y21:l,y22:c}=bt(n,t,!0);return!(e>o||s<h||r>c||a<l)}return!0}function Sn(n,t,i){if(!t)return!0;if(!i)return n.x>=t.x1&&n.x<=t.x2&&n.y>=t.y1&&n.y<=t.y2;let e=t.x1,s=t.x2,r=t.y1,a=t.y2;return e>s&&([e,s]=[s,e]),r>a&&([r,a]=[a,r]),n.x>=e&&n.x<=s&&n.y>=r&&n.y<=a}function ht(n,t){return Math.abs(t[0]*n[0]+t[1]*n[1])}function j({x:n,y:t},i,e={x:0,y:0}){return{x:(n-e.x)*Math.cos(i)-(t-e.y)*Math.sin(i)+e.x,y:(n-e.x)*Math.sin(i)+(t-e.y)*Math.cos(i)+e.y}}function _t(n){return{x:(n.x1+n.x2)/2,y:(n.y1+n.y2)/2}}function qt(n,t){const i=t?P(n.angle):n.angle,e=_t(n);return[j({x:n.x1,y:n.y1},i,e),j({x:n.x2,y:n.y1},i,e),j({x:n.x2,y:n.y2},i,e),j({x:n.x1,y:n.y2},i,e)]}function hi(n,t,i=!1,e){const s=qt(n,i),r=qt(t,i),a=(R,y)=>[y.x-R.x,y.y-R.y],h=_t(n),o=_t(t),l=a(h,o),c=a(s[0],s[1]),u=a(s[1],s[2]),f=a(r[0],r[1]),_=a(r[1],r[2]),d=i?P(n.angle):n.angle;let p=i?P(90-n.angle):n.angle+K;const M=i?P(t.angle):t.angle;let x=i?P(90-t.angle):t.angle+K;p>U&&(p-=U),x>U&&(x-=U);const A=(R,y,S,I)=>{const F=[Math.cos(y),Math.sin(y)];return R+(ht(F,S)+ht(F,I))/2>ht(F,l)};return A((n.x2-n.x1)/2,d,f,_)&&A((n.y2-n.y1)/2,p,f,_)&&A((t.x2-t.x1)/2,M,c,u)&&A((t.y2-t.y1)/2,x,c,u)}const Ut=n=>{let t=n.charCodeAt(0),i=n.length===2?n.charCodeAt(1):0,e=t;return 55296<=t&&t<=56319&&56320<=i&&i<=57343&&(t&=1023,i&=1023,e=t<<10|i,e+=65536),e===12288||65281<=e&&e<=65376||65504<=e&&e<=65510?"F":e===8361||65377<=e&&e<=65470||65474<=e&&e<=65479||65482<=e&&e<=65487||65490<=e&&e<=65495||65498<=e&&e<=65500||65512<=e&&e<=65518?"H":4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12289<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||110592<=e&&e<=110593||127488<=e&&e<=127490||127504<=e&&e<=127546||127552<=e&&e<=127560||127568<=e&&e<=127569||131072<=e&&e<=194367||177984<=e&&e<=196605||196608<=e&&e<=262141?"W":32<=e&&e<=126||162<=e&&e<=163||165<=e&&e<=166||e===172||e===175||10214<=e&&e<=10221||10629<=e&&e<=10630?"Na":e===161||e===164||167<=e&&e<=168||e===170||173<=e&&e<=174||176<=e&&e<=180||182<=e&&e<=186||188<=e&&e<=191||e===198||e===208||215<=e&&e<=216||222<=e&&e<=225||e===230||232<=e&&e<=234||236<=e&&e<=237||e===240||242<=e&&e<=243||247<=e&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||294<=e&&e<=295||e===299||305<=e&&e<=307||e===312||319<=e&&e<=322||e===324||328<=e&&e<=331||e===333||338<=e&&e<=339||358<=e&&e<=359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||713<=e&&e<=715||e===717||e===720||728<=e&&e<=731||e===733||e===735||768<=e&&e<=879||913<=e&&e<=929||931<=e&&e<=937||945<=e&&e<=961||963<=e&&e<=969||e===1025||1040<=e&&e<=1103||e===1105||e===8208||8211<=e&&e<=8214||8216<=e&&e<=8217||8220<=e&&e<=8221||8224<=e&&e<=8226||8228<=e&&e<=8231||e===8240||8242<=e&&e<=8243||e===8245||e===8251||e===8254||e===8308||e===8319||8321<=e&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||8481<=e&&e<=8482||e===8486||e===8491||8531<=e&&e<=8532||8539<=e&&e<=8542||8544<=e&&e<=8555||8560<=e&&e<=8569||e===8585||8592<=e&&e<=8601||8632<=e&&e<=8633||e===8658||e===8660||e===8679||e===8704||8706<=e&&e<=8707||8711<=e&&e<=8712||e===8715||e===8719||e===8721||e===8725||e===8730||8733<=e&&e<=8736||e===8739||e===8741||8743<=e&&e<=8748||e===8750||8756<=e&&e<=8759||8764<=e&&e<=8765||e===8776||e===8780||e===8786||8800<=e&&e<=8801||8804<=e&&e<=8807||8810<=e&&e<=8811||8814<=e&&e<=8815||8834<=e&&e<=8835||8838<=e&&e<=8839||e===8853||e===8857||e===8869||e===8895||e===8978||9312<=e&&e<=9449||9451<=e&&e<=9547||9552<=e&&e<=9587||9600<=e&&e<=9615||9618<=e&&e<=9621||9632<=e&&e<=9633||9635<=e&&e<=9641||9650<=e&&e<=9651||9654<=e&&e<=9655||9660<=e&&e<=9661||9664<=e&&e<=9665||9670<=e&&e<=9672||e===9675||9678<=e&&e<=9681||9698<=e&&e<=9701||e===9711||9733<=e&&e<=9734||e===9737||9742<=e&&e<=9743||9748<=e&&e<=9749||e===9756||e===9758||e===9792||e===9794||9824<=e&&e<=9825||9827<=e&&e<=9829||9831<=e&&e<=9834||9836<=e&&e<=9837||e===9839||9886<=e&&e<=9887||9918<=e&&e<=9919||9924<=e&&e<=9933||9935<=e&&e<=9953||e===9955||9960<=e&&e<=9983||e===10045||e===10071||10102<=e&&e<=10111||11093<=e&&e<=11097||12872<=e&&e<=12879||57344<=e&&e<=63743||65024<=e&&e<=65039||e===65533||127232<=e&&e<=127242||127248<=e&&e<=127277||127280<=e&&e<=127337||127344<=e&&e<=127386||917760<=e&&e<=917999||983040<=e&&e<=1048573||1048576<=e&&e<=1114109?"A":"N"};function oi(n,t={},i){i||(i=1);const{fontStyle:e=t.fontStyle,fontVariant:s=t.fontVariant,fontWeight:r=t.fontWeight,fontSize:a=t.fontSize,fontFamily:h=t.fontFamily}=n;return(e?e+" ":"")+(s?s+" ":"")+(r?r+" ":"")+a*i+"px "+(h||"sans-serif")}class N{constructor(t,i){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=i??{},this.textSpec=this._initSpec(),m(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=m(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(g(this._canvas)&&(m(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),g(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&m(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),g(this._context)&&m(this._canvas)){const t=this._canvas.getContext("2d");m(t)&&(t.save(),t.font=oi(this.textSpec),this._contextSaved=!0,this._context=t)}return!g(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,i,e;const{defaultFontParams:s={}}=this._option,{fontStyle:r=s.fontStyle,fontVariant:a=s.fontVariant,fontWeight:h=(t=s.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:o=(i=s.fontSize)!==null&&i!==void 0?i:12,fontFamily:l=(e=s.fontFamily)!==null&&e!==void 0?e:"sans-serif",align:c,textAlign:u=c??"center",baseline:f,textBaseline:_=f??"middle",ellipsis:d,limit:p}=this._userSpec;let{lineHeight:M=o}=this._userSpec;if(it(M)&&M[M.length-1]==="%"){const x=Number.parseFloat(M.substring(0,M.length-1))/100;M=o*x}return{fontStyle:r,fontVariant:a,fontFamily:l,fontSize:o,fontWeight:h,textAlign:u,textBaseline:_,ellipsis:d,limit:p,lineHeight:M}}measure(t,i){switch(i){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(g(t))return{width:0,height:0};if(g(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:i,fontSize:e,fontWeight:s,textAlign:r,textBaseline:a,ellipsis:h,limit:o,lineHeight:l}=this.textSpec;let c;try{const u=this._option.getTextBounds({text:t,fontFamily:i,fontSize:e,fontWeight:s,textAlign:r,textBaseline:a,ellipsis:!!h,maxLineWidth:o||1/0,lineHeight:l});c={width:u.width(),height:u.height()}}catch{this._notSupportVRender=!0,c=this.measureWithNaiveCanvas(t)}return c}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var i;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const e=this._context.measureText(t),{fontSize:s,lineHeight:r}=this.textSpec;return{width:e.width,height:(i=r)!==null&&i!==void 0?i:s}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const i={width:0,height:0};for(let e=0;e<t.length;e++){const s=t[e];let r=this._measureSpecialChar(s);g(r)&&N.NUMBERS_CHAR_SET.includes(s)&&(r=this._measureNumberChar()),g(r)&&["F","W"].includes(Ut(s))&&(r=this._measureFullSizeChar()),g(r)&&(r=this._measureLetterChar()),i.width+=r.width,i.height=Math.max(i.height,r.height)}return i}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var i;const e={width:0,height:0},{fontSize:s,lineHeight:r}=this.textSpec;for(let a=0;a<t.length;a++){const h=t[a],o=["F","W"].includes(Ut(h))?1:.53;e.width+=o*s}return e.height=(i=r)!==null&&i!==void 0?i:s,e}_measureReduce(t,i){var e;const{fontSize:s,lineHeight:r}=this.textSpec,a={width:0,height:0};if(g(t))return a;if(b(t)){const h=t.filter(m).map(o=>o.toString());return h.length===0?a:h.length===1?i(h[0]):{width:h.reduce((o,l)=>Math.max(o,i(l).width),0),height:h.length*(((e=r)!==null&&e!==void 0?e:s)+1)+1}}return i(t.toString())}_measureNumberChar(){if(g(this._numberCharSize)){const t=this._standardMethod(N.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/N.NUMBERS_CHAR_SET.length,height:t.height}}return this._numberCharSize}_measureFullSizeChar(){return g(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(N.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(g(this._letterCharSize)){const t=this._standardMethod(N.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/N.ALPHABET_CHAR_SET.length,height:t.height}}return this._letterCharSize}_measureSpecialChar(t){return m(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){m(this._canvas)&&(this._canvas=null),m(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}N.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",N.NUMBERS_CHAR_SET="0123456789",N.FULL_SIZE_CHAR="字";function li(n,t,i){const{x1:e,y1:s,x2:r,y2:a}=t;return i.onlyTranslate()?(n!==t&&n.setValue(t.x1,t.y1,t.x2,t.y2),n.translate(i.e,i.f),t):(n.clear(),n.add(i.a*e+i.c*s+i.e,i.b*e+i.d*s+i.f),n.add(i.a*r+i.c*s+i.e,i.b*r+i.d*s+i.f),n.add(i.a*r+i.c*a+i.e,i.b*r+i.d*a+i.f),n.add(i.a*e+i.c*a+i.e,i.b*e+i.d*a+i.f),t)}class nt{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new nt(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,i=0,e=0,s=0){return this.x1=t,this.y1=i,this.x2=e,this.y2=s,this}set(t=0,i=0,e=0,s=0){return e<t?(this.x2=t,this.x1=e):(this.x1=t,this.x2=e),s<i?(this.y2=i,this.y1=s):(this.y1=i,this.y2=s),this}add(t=0,i=0){return t<this.x1&&(this.x1=t),i<this.y1&&(this.y1=i),t>this.x2&&(this.x2=t),i>this.y2&&(this.y2=i),this}expand(t=0){return b(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,i=0){return this.x1+=t,this.x2+=t,this.y1+=i,this.y2+=i,this}rotate(t=0,i=0,e=0){const s=this.rotatedPoints(t,i,e);return this.clear().add(s[0],s[1]).add(s[2],s[3]).add(s[4],s[5]).add(s[6],s[7])}scale(t=0,i=0,e=0,s=0){const r=this.scalePoints(t,i,e,s);return this.clear().add(r[0],r[1]).add(r[2],r[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,i=0){return!(t<this.x1||t>this.x2||i<this.y1||i>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return li(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,i,e){const{x1:s,y1:r,x2:a,y2:h}=this,o=Math.cos(t),l=Math.sin(t),c=i-i*o+e*l,u=e-i*l-e*o;return[o*s-l*r+c,l*s+o*r+u,o*s-l*h+c,l*s+o*h+u,o*a-l*r+c,l*a+o*r+u,o*a-l*h+c,l*a+o*h+u]}scalePoints(t,i,e,s){const{x1:r,y1:a,x2:h,y2:o}=this;return[t*r+(1-t)*e,i*a+(1-i)*s,t*h+(1-t)*e,i*o+(1-i)*s]}}class vn extends nt{}class En extends nt{constructor(t,i=0){super(t),t&&(this.angle=i)}intersects(t){return hi(this,t)}setValue(t=0,i=0,e=0,s=0,r=0){return super.setValue(t,i,e,s),this.angle=r,this}}class G{constructor(t=1,i=0,e=0,s=1,r=0,a=0){this.a=t,this.b=i,this.c=e,this.d=s,this.e=r,this.f=a}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,i,e,s,r,a){return!(this.e!==r||this.f!==a||this.a!==t||this.d!==s||this.b!==i||this.c!==e)}setValue(t,i,e,s,r,a){return this.a=t,this.b=i,this.c=e,this.d=s,this.e=r,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const t=this.a,i=this.b,e=this.c,s=this.d,r=this.e,a=this.f,h=new G,o=t*s-i*e;return h.a=s/o,h.b=-i/o,h.c=-e/o,h.d=t/o,h.e=(e*a-s*r)/o,h.f=-(t*a-i*r)/o,h}rotate(t){const i=Math.cos(t),e=Math.sin(t),s=this.a*i+this.c*e,r=this.b*i+this.d*e,a=this.a*-e+this.c*i,h=this.b*-e+this.d*i;return this.a=s,this.b=r,this.c=a,this.d=h,this}rotateByCenter(t,i,e){const s=Math.cos(t),r=Math.sin(t),a=(1-s)*i+r*e,h=(1-s)*e-r*i,o=s*this.a-r*this.b,l=r*this.a+s*this.b,c=s*this.c-r*this.d,u=r*this.c+s*this.d,f=s*this.e-r*this.f+a,_=r*this.e+s*this.f+h;return this.a=o,this.b=l,this.c=c,this.d=u,this.e=f,this.f=_,this}scale(t,i){return this.a*=t,this.b*=t,this.c*=i,this.d*=i,this}setScale(t,i){return this.b=this.b/this.a*t,this.c=this.c/this.d*i,this.a=t,this.d=i,this}transform(t,i,e,s,r,a){return this.multiply(t,i,e,s,r,a),this}translate(t,i){return this.e+=this.a*t+this.c*i,this.f+=this.b*t+this.d*i,this}transpose(){const{a:t,b:i,c:e,d:s,e:r,f:a}=this;return this.a=i,this.b=t,this.c=s,this.d=e,this.e=a,this.f=r,this}multiply(t,i,e,s,r,a){const h=this.a,o=this.b,l=this.c,c=this.d,u=h*t+l*i,f=o*t+c*i,_=h*e+l*s,d=o*e+c*s,p=h*r+l*a+this.e,M=o*r+c*a+this.f;return this.a=u,this.b=f,this.c=_,this.d=d,this.e=p,this.f=M,this}interpolate(t,i){const e=new G;return e.a=this.a+(t.a-this.a)*i,e.b=this.b+(t.b-this.b)*i,e.c=this.c+(t.c-this.c)*i,e.d=this.d+(t.d-this.d)*i,e.e=this.e+(t.e-this.e)*i,e.f=this.f+(t.f-this.f)*i,e}transformPoint(t,i){const{a:e,b:s,c:r,d:a,e:h,f:o}=this,l=e*a-s*r,c=a/l,u=-s/l,f=-r/l,_=e/l,d=(r*o-a*h)/l,p=-(e*o-s*h)/l,{x:M,y:x}=t;i.x=M*c+x*f+d,i.y=M*u+x*_+p}onlyTranslate(t=1){return this.a===t&&this.b===0&&this.c===0&&this.d===t}clone(){return new G(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const t=this.a,i=this.b,e=this.c,s=this.d,r=t*s-i*e,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!==0||i!==0){const h=Math.sqrt(t*t+i*i);a.rotateDeg=i>0?Math.acos(t/h):-Math.acos(t/h),a.scaleX=h,a.scaleY=r/h,a.skewX=(t*e+i*s)/r,a.skewY=0}else if(e!==0||s!==0){const h=Math.sqrt(e*e+s*s);a.rotateDeg=Math.PI/2-(s>0?Math.acos(-e/h):-Math.acos(e/h)),a.scaleX=r/h,a.scaleY=h,a.skewX=0,a.skewY=(t*e+i*s)/r}return a.rotateDeg=ni(a.rotateDeg),a}}function Tn(n,t,i,e,s,r,a,h){const o=t.a,l=t.b,c=t.c,u=t.d,f=t.e,_=t.f,d=ti(a),p=ei(a);let M,x;h?(M=h[0],x=h[1]):(M=i,x=e);const A=M-i,R=x-e,y=o*d+c*p,S=l*d+u*p,I=c*d-o*p,F=u*d-l*p;n.a=s*y,n.b=s*S,n.c=r*I,n.d=r*F,n.e=f+o*M+c*x-y*A-I*R,n.f=_+l*M+u*x-S*A-F*R}class bn{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,i){const{CLEAN_THRESHOLD:e=this.CLEAN_THRESHOLD,L_TIME:s=this.L_TIME,R_COUNT:r=this.R_COUNT}=i;if(t.size<e)return 0;let a=0;const h=l=>{a++,t.delete(l)},o=Date.now();return t.forEach((l,c)=>{if(l.timestamp.length<r)return h(c);let u=0;for(;o-l.timestamp[l.timestamp.length-1-u]<s&&(u++,!(u>=r)););if(u<r)return h(c);for(;o-l.timestamp[0]>s;)l.timestamp.shift()}),a}addLimitedTimestamp(t,i,e){const{R_TIMESTAMP_MAX_SIZE:s=this.R_TIMESTAMP_MAX_SIZE}=e;t.timestamp.length>s&&t.timestamp.shift(),t.timestamp.push(i)}clearTimeStamp(t,i){const{L_TIME:e=this.L_TIME}=i,s=Date.now();t.forEach(r=>{for(;s-r.timestamp[0]>e;)r.timestamp.shift()})}clearItemTimestamp(t,i){const{L_TIME:e=this.L_TIME}=i,s=Date.now();for(;s-t.timestamp[0]>e;)t.timestamp.shift()}}function pt(n,t,i){t/=100,i/=100;const e=(1-Math.abs(2*i-1))*t,s=e*(1-Math.abs(n/60%2-1)),r=i-e/2;let a=0,h=0,o=0;return 0<=n&&n<60?(a=e,h=s,o=0):60<=n&&n<120?(a=s,h=e,o=0):120<=n&&n<180?(a=0,h=e,o=s):180<=n&&n<240?(a=0,h=s,o=e):240<=n&&n<300?(a=s,h=0,o=e):300<=n&&n<360&&(a=e,h=0,o=s),a=Math.round(255*(a+r)),h=Math.round(255*(h+r)),o=Math.round(255*(o+r)),{r:a,g:h,b:o}}function Rt(n,t,i){n/=255,t/=255,i/=255;const e=Math.min(n,t,i),s=Math.max(n,t,i),r=s-e;let a=0,h=0,o=0;return a=r===0?0:s===n?(t-i)/r%6:s===t?(i-n)/r+2:(n-t)/r+4,a=Math.round(60*a),a<0&&(a+=360),o=(s+e)/2,h=r===0?0:r/(1-Math.abs(2*o-1)),h=+(100*h).toFixed(1),o=+(100*o).toFixed(1),{h:a,s:h,l:o}}const ci=/^#([0-9a-f]{3,8})$/,jt={transparent:4294967040},Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function de(n){return v(n)?new T(n>>16,n>>8&255,255&n,1):b(n)?new T(n[0],n[1],n[2]):new T(255,255,255)}function ui(n){return v(n)?new T(n>>>24,n>>>16&255,n>>>8&255,255&n):b(n)?new T(n[0],n[1],n[2],n[3]):new T(255,255,255,1)}function ot(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function lt(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const $t=(n,t)=>{const i=ci.exec(n);if(t||i){const e=parseInt(i[1],16),s=i[1].length;return s===3?new T((e>>8&15)+((e>>8&15)<<4),(e>>4&15)+((e>>4&15)<<4),(15&e)+((15&e)<<4),1):s===6?de(e):s===8?new T(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):null}};class k{static Brighter(t,i=1){return i===1?t:new k(t).brighter(i).toRGBA()}static SetOpacity(t,i=1){return i===1?t:new k(t).setOpacity(i).toRGBA()}static getColorBrightness(t,i="hsl"){const e=t instanceof k?t:new k(t);switch(i){case"hsv":default:return e.getHSVBrightness();case"hsl":return e.getHSLBrightness();case"lum":return e.getLuminance();case"lum2":return e.getLuminance2();case"lum3":return e.getLuminance3()}}static parseColorString(t){if(m(jt[t]))return ui(jt[t]);if(m(Y[t]))return de(Y[t]);const i=`${t}`.trim().toLowerCase(),e=$t(i);if(e!==void 0)return e;if(/^(rgb|RGB|rgba|RGBA)/.test(i)){const s=i.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new T(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseFloat(s[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(i)){const s=i.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),r=pt(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10));return new T(r.r,r.g,r.b,parseFloat(s[3]))}}constructor(t){const i=k.parseColorString(t);i?this.color=i:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new T(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:i,g:e,b:s}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(s*t))),this}add(t){const{r:i,g:e,b:s}=this.color;return this.color.r+=Math.min(255,i+t.color.r),this.color.g+=Math.min(255,e+t.color.g),this.color.b+=Math.min(255,s+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:i,g:e,b:s}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(i*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(e*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(s*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,i,e){const s=this.color.opacity,r=Rt(this.color.r,this.color.g,this.color.b),a=pt(g(t)?r.h:ce(t,0,360),g(i)?r.s:i>=0&&i<=1?100*i:i,g(e)?r.l:e<=1&&e>=0?100*e:e);return this.color=new T(a.r,a.g,a.b,s),this}setRGB(t,i,e){return!g(t)&&(this.color.r=t),!g(i)&&(this.color.g=i),!g(e)&&(this.color.b=e),this}setHex(t){const i=`${t}`.trim().toLowerCase(),e=$t(i,!0);return e??this}setColorName(t){const i=Y[t.toLowerCase()];return i!==void 0?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}clone(){return new k(this.color.toString())}copyGammaToLinear(t,i=2){return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}copyLinearToGamma(t,i=2){const e=i>0?1/i:1;return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=ot(t.color.r),this.color.g=ot(t.color.g),this.color.b=ot(t.color.b),this}copyLinearToSRGB(t){return this.color.r=lt(t.color.r),this.color.g=lt(t.color.g),this.color.b=lt(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class T{constructor(t,i,e,s){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),this.b=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),m(s)?this.opacity=isNaN(+s)?1:Math.max(0,Math.min(1,+s)):this.opacity=1}formatHex(){return`#${$(this.r)+$(this.g)+$(this.b)+(this.opacity===1?"":$(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:i,s:e,l:s}=Rt(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${i},${e}%,${s}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}}function fi(n){let t="",i="",e="";const s=n[0]==="#"?1:0;for(let r=s;r<n.length;r++)n[r]!=="#"&&(r<s+2?t+=n[r]:r<s+4?i+=n[r]:r<s+6&&(e+=n[r]));return[parseInt(t,16),parseInt(i,16),parseInt(e,16)]}function di(n,t,i){return Number((1<<24)+(n<<16)+(t<<8)+i).toString(16).slice(1)}function mi(n,t){const i=n.r,e=t.r,s=n.g,r=t.g,a=n.b,h=t.b,o=n.opacity,l=t.opacity;return c=>{const u=Math.round(i*(1-c)+e*c),f=Math.round(s*(1-c)+r*c),_=Math.round(a*(1-c)+h*c);return new T(u,f,_,o*(1-c)+l*c)}}const gi=Object.freeze(Object.defineProperty({__proto__:null,Color:k,DEFAULT_COLORS:Y,RGB:T,hexToRgb:fi,hslToRgb:pt,interpolateRgb:mi,rgbToHex:di,rgbToHsl:Rt},Symbol.toStringTag,{value:"Module"}));function Rn(n){if(se(n))return[n,n,n,n];if(b(n)){const t=n.length;if(t===1){const i=n[0];return[i,i,i,i]}if(t===2){const[i,e]=n;return[i,e,i,e]}if(t===3){const[i,e,s]=n;return[i,e,s,e]}if(t===4)return n}if(xt(n)){const{top:t=0,right:i=0,bottom:e=0,left:s=0}=n;return[t,i,e,s]}return[0,0,0,0]}function Fn(n,t=0,i=0){if(!n)return{width:t,height:i};let e;try{e=window==null?void 0:window.getComputedStyle}catch{e=()=>({})}const s=e(n);if(/^(\d*\.?\d+)(px)$/.exec(s.width)){const r=parseFloat(s.width)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)||n.clientWidth-1,a=parseFloat(s.height)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)||n.clientHeight-1;return{width:r<=0?t:r,height:a<=0?i:a}}return{width:t,height:i}}function Dn(n){const{x:t,y:i}=n.getBoundingClientRect();return{x:t,y:i}}const kn=(n="")=>{const t={};return n.split(";").forEach(i=>{if(i){const e=i.split(":");if(e.length===2){const s=e[0].trim(),r=e[1].trim();s&&r&&(t[s]=r)}}}),t},An=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase();function In(n){try{return n instanceof Element}catch{const i=["children","innerHTML","classList","setAttribute","tagName","getBoundingClientRect"],e=Object.keys(n);return i.every(s=>e.includes(s))}}const _i=(n,t)=>{var i,e;if(!(t!=null&&t.fields)||n.length===0)return n;const s=t.fields,r=n[0],a={},h=[];for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=s[o];if(!l.type){let u=r;o in r||(u=(i=n.find(f=>o in f))!==null&&i!==void 0?i:r),l.type=typeof u[o]=="number"?"linear":"ordinal"}let c;if(typeof l.sortIndex=="number"&&(c={key:o,type:l.type,index:l.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:l.sortReverse===!0},h.push(c)),((e=l.domain)===null||e===void 0?void 0:e.length)>0)if(l.type==="ordinal"){l._domainCache={},a[o]=l;const u={};l.domain.forEach((f,_)=>{u[f]=_,l._domainCache[f]=_}),c&&(c.sortIndex=u,c.sortIndexCount=l.domain.length)}else l.domain.length>=2&&(a[o]=l)}return Object.keys(a).length>0&&(n=n.filter(o=>{for(const l in a){const c=a[l];if(c.type==="ordinal"){if(!(o[l]in c._domainCache))return!1}else if(c.domain[0]>o[l]||c.domain[1]<o[l])return!1}return!0})),h.sort((o,l)=>o.index-l.index),n.sort((o,l)=>pi(o,l,h)),n};function pi(n,t,i){for(let e=0;e<i.length;e++){const s=i[e];let r=0;if(s.type==="ordinal"?(s.sortIndex[t[s.key]]===void 0&&(s.sortIndex[t[s.key]]=s.sortIndexCount++),s.sortIndex[n[s.key]]===void 0&&(s.sortIndex[n[s.key]]=s.sortIndexCount++),r=s.sortIndex[n[s.key]]-s.sortIndex[t[s.key]]):s.type==="linear"&&(r=n[s.key]-t[s.key]),s.sortReverse&&(r=-r),r!==0)return r}return 0}let ct=0;const yi=1e8;function me(n="dataset"){return ct>yi&&(ct=0),n+"_"+ct++}class Nn{constructor(t){var i;let e;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new ie,e=t!=null&&t.name?t.name:me("dataset"),this.name=e,this._logger=(i=t==null?void 0:t.logger)!==null&&i!==void 0?i:E.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,i){var e;this.dataViewMap[t]&&((e=this._logger)===null||e===void 0||e.error(`Error: dataView ${t} 之前已存在，请重新命名`)),this.dataViewMap[t]=i}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,i){var e;this.parserMap[t]&&((e=this._logger)===null||e===void 0||e.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.parserMap[t]=i}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,i){var e;this.transformMap[t]&&((e=this._logger)===null||e===void 0||e.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.transformMap[t]=i}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,i,e){this._callMap||(this._callMap=new Map);let s=this._callMap.get(e);s||(s=()=>{t.some(r=>r.isRunning)||e()}),t.forEach(r=>{r.target.addListener(i,s)}),this._callMap.set(e,s)}allDataViewAddListener(t,i){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,i)}multipleDataViewRemoveListener(t,i,e){if(this._callMap){const s=this._callMap.get(e);s&&t.forEach(r=>{r.target.removeListener(i,s)}),this._callMap.delete(e)}}multipleDataViewUpdateInParse(t){t.forEach(i=>{var e;return(e=this.getDataView(i.name))===null||e===void 0?void 0:e.markRunning()}),t.forEach(i=>{var e;return(e=this.getDataView(i.name))===null||e===void 0?void 0:e.parseNewData(i.data,i.options)})}multipleDataViewUpdateInRawData(t){t.forEach(i=>{var e;return(e=this.getDataView(i.name))===null||e===void 0?void 0:e.markRunning()}),t.forEach(i=>{var e;return(e=this.getDataView(i.name))===null||e===void 0?void 0:e.updateRawData(i.data,i.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}const ut="_data-view-diff-rank";class Ft{constructor(t,i){let e;this.dataSet=t,this.options=i,this.isDataView=!0,this.target=new ie,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(s={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(r=>{this.executeTransform(r,{pushHistory:s.pushHistory,emitMessage:!1}),this.isLastTransform(r)&&this.diffLastData()}),this.isRunning=!1,s.emitMessage!==!1&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},e=i!=null&&i.name?i.name:me("dataview"),this.name=e,i!=null&&i.history&&(this.history=i.history,this.historyData=[]),this.dataSet.setDataView(e,this),this.setFields(i==null?void 0:i.fields)}parse(t,i,e=!1){var s;this.isRunning=!0,e&&this.target.emit("beforeParse",[]),i&&(this.parseOption=i);const r=this.cloneParseData(t,i);if(i!=null&&i.type){const a=((s=this.dataSet.getParser(i.type))!==null&&s!==void 0?s:this.dataSet.getParser("bytejson"))(r,i.options,this);this.rawData=r,this.parserData=a,this.history&&this.historyData.push(r,a),this.latestData=a}else this.parserData=r,this.rawData=r,this.history&&this.historyData.push(r),this.latestData=r;return this.isRunning=!1,e&&this.target.emit("afterParse",[]),this}transform(t,i=!0){if(this.isRunning=!0,t&&t.type){let e=!0;if(t.type==="fields"){this._fields=t.options.fields;const s=this.transformsArr.findIndex(r=>r.type===t.type);s>=0&&(e=!1,this.transformsArr[s].options.fields=this._fields)}if(e&&this.transformsArr.push(t),i){const s=this.isLastTransform(t);this.executeTransform(t),s&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(t){return this.transformsArr[this.transformsArr.length-1]===t}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,i)=>{var e,s;return((e=t.level)!==null&&e!==void 0?e:0)-((s=i.level)!==null&&s!==void 0?s:0)})}executeTransform(t,i={pushHistory:!0,emitMessage:!0}){const{pushHistory:e,emitMessage:s}=i,r=this.dataSet.getTransform(t.type)(this.latestData,t.options);this.history&&e!==!1&&this.historyData.push(r),this.latestData=r,s!==!1&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(t){this._diffData=!0,this._diffKeys=t,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var t;if(!this._diffData||!this.latestData.forEach||!(!((t=this._diffKeys)===null||t===void 0)&&t.length))return;const i=this._diffRank+1;if(this._diffRank===0)this.latestData.forEach(e=>{e[ut]=i,this._diffMap.set(this._diffKeys.reduce((s,r)=>s+e[r],""),e)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let e;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(s=>{s[ut]=i,e=this._diffKeys.reduce((r,a)=>r+s[a],""),this._diffMap.get(e)?this.latestDataAUD.update.push(s):this.latestDataAUD.add.push(s),this._diffMap.set(e,s)}),this._diffMap.forEach((s,r)=>{s[ut]<i&&(this.latestDataAUD.del.push(s),this._diffMap.delete(r))})}this._diffRank=i}cloneParseData(t,i){let e=!1;return t instanceof Ft||(i==null?void 0:i.clone)!==!0||(e=!0),e?re(t):t}parseNewData(t,i){this.parse(t,i||this.parseOption),this.reRunAllTransform()}updateRawData(t,i){const e=this.cloneParseData(t,i);this.rawData=e,this.parserData=e,this.latestData=e,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:((t=this.parseOption)===null||t===void 0?void 0:t.type)==="dataview"&&this.rawData.length===1&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,i=!1){this._fields=t&&i?Ve({},this._fields,t):t;const e=this.transformsArr.find(s=>s.type==="fields");!g(this._fields)&&g(e)?(this.dataSet.registerTransform("fields",_i),this.transform({type:"fields",options:{fields:this._fields}},!1)):e&&(e.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}function Cn(n){return n instanceof Ft}var w;(function(n){n.Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band"})(w||(w={}));const ge={};Object.values(w).forEach(n=>{ge[n]=!0});function Bn(n){switch(n){case w.Linear:case w.Log:case w.Pow:case w.Sqrt:case w.Symlog:case w.Time:return!0;default:return!1}}function On(n){return!!ge[n]}function Vn(n){switch(n){case w.Ordinal:case w.Point:case w.Band:return!0;default:return!1}}function B(n){return n}const Ln=n=>n<0?-Math.sqrt(-n):Math.sqrt(n),Pn=n=>n<0?-n*n:n*n,Mi=n=>-Math.log(-n),xi=n=>-Math.exp(-n),wi=n=>isFinite(n)?Math.pow(10,n):n<0?0:n,Xt=n=>n===10?wi:n===Math.E?Math.exp:t=>Math.pow(n,t),Gt=n=>n===Math.E?Math.log:n===10?Math.log10:n===2?Math.log2:(n=Math.log(n),t=>Math.log(t)/n),Yt=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),Zt=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n;function yt(n,t){if(n=Number(n),t=Number(t),t-=n)return e=>(e-n)/t;const i=Number.isNaN(t)?NaN:.5;return()=>i}function Kt(n,t,i){const e=n[0],s=n[1],r=t[0],a=t[1];let h,o;return s<e?(h=yt(s,e),o=i(a,r)):(h=yt(e,s),o=i(r,a)),l=>o(h(l))}function Dt(n,t,i){let e;return e=n===1?n+2*i:n-t+2*i,n?e>0?e:1:0}function Si(n,t,i,e){return i===1&&(i=0),Dt(n,i,e)*(t/(1-i))}function vi(n,t,i,e,s){const r=Dt(n,i,e);let a=t/Math.max(1,r||1);s&&(a=Math.floor(a));let h=a*(1-i);return s&&(h=Math.round(h)),h}function _e(n,t){const i=(n[1]-n[0])/(t[1]-t[0]),e=n[0]-i*t[0];return[e,i+e]}function Ei(n,t,i){const e=Math.min(n.length,t.length)-1,s=new Array(e),r=new Array(e);let a=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<e;)s[a]=yt(n[a],n[a+1]),r[a]=i(t[a],t[a+1]);return function(h){const o=je(n,h,1,e)-1;return r[o](s[o](h))}}const Ti=(n,t)=>{const i=n.slice();let e=0,s=i.length-1,r=i[e],a=i[s];return a<r&&([e,s]=[s,e],[r,a]=[a,r]),i[e]=t.floor(r),i[s]=t.ceil(a),i},pe=(n,t=!1)=>{const i=Math.floor(Math.log10(n)),e=n/Math.pow(10,i);let s;return s=t?e<1.5?1:e<3?2:e<7?5:10:e<=1?1:e<=2?2:e<=5?5:10,s*Math.pow(10,i)},bi=(n,t)=>{let i,e;return t[0]<t[1]?(i=t[0],e=t[1]):(i=t[1],e=t[0]),Math.min(Math.max(n,i),e)};class ye{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&t.length===2?(this._wholeRange=_e(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,i,e){return t?(t.length===2&&t.every(s=>s>=0&&s<=1)&&(this._wholeRange=null,t[0]===0&&t[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):e?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):m(this._rangeFactorStart)&&m(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,i){var e;return g(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!g(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=t,this._rangeFactorEnd=(e=this._rangeFactorEnd)!==null&&e!==void 0?e:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,i){var e;return g(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!g(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=t,this._rangeFactorStart=(e=this._rangeFactorStart)!==null&&e!==void 0?e:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:i=2,radiusRatio:e=.1,radius:s}=this._fishEyeOptions,r=this.range(),a=r[0],h=r[r.length-1],o=Math.min(a,h),l=Math.max(a,h),c=ce((t=this._fishEyeOptions.focus)!==null&&t!==void 0?t:0,o,l),u=g(s)?(l-o)*e:s;let f=Math.exp(i);f=f/(f-1)*u;const _=i/u;this._fishEyeTransform=d=>{const p=Math.abs(d-c);if(p>=u)return d;if(p<=1e-6)return c;const M=f*(1-Math.exp(-p*_))/p*.75+.25;return c+(d-c)*M}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,i){var e;return(e=this==null?void 0:this[t])!==null&&e!==void 0?e:i}}const Mt=Symbol("implicit");class kt extends ye{specified(t){var i;return t?(this._specified=Object.assign((i=this._specified)!==null&&i!==void 0?i:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=w.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=Mt}clone(){const t=new kt().domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){const i=`${t}`,e=this._getSpecifiedValue(i);if(e!==void 0)return e;let s=this._index.get(i);if(!s){if(this._unknown!==Mt)return this._unknown;s=this._domain.push(t),this._index.set(i,s)}const r=this._ordinalRange[(s-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(r):r}invert(t){let i=0;for(;i<this._ordinalRange.length&&this._ordinalRange[i]!==t;)i++;return this._domain[(i-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();this._domain=[],this._index=new Map;for(const i of t){const e=`${i}`;this._index.has(e)||this._index.set(e,this._domain.push(i))}return this}range(t){if(!t)return this._ordinalRange.slice();const i=Array.from(t);return this._ordinalRange=i,this}index(t){var i;return this._index&&(i=this._index.get(`${t}`))!==null&&i!==void 0?i:-1}}function Me(n,t,i,e){const s=[];let r=n;for(;r<=t;)s.push(r),r+=i;return e&&s.reverse(),s}function Qt(n,t,i,e){let s,r;if(t=Math.floor(+t),n=Math.floor(+n),!(i=Math.floor(+i)))return[];if(n===t)return[n];if(s=t<n){const h=n;n=t,t=h}let a=vt(1,t-n+1)(i);if(r=Math.floor((t-n+1)/a),!e)for(;Math.ceil((t-n+1)/r)>i&&a>1;)a-=1,r=Math.floor((t-n)/a);return Me(n,t,r,s)}function Ri(n,t,i){let e;if(t=Math.floor(+t),n=Math.floor(+n),i=vt(1,t-n+1)(Math.floor(+i)),e=t<n){const s=n;n=t,t=s}return Me(n,t,i,e)}class At extends kt{constructor(t){super(),this.type=w.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,i){if(t)return this;this._wholeRange=null;const e=this._calculateWholeRange(this._range,i),s=super.domain().length,r=e[1]<e[0];let a=e[Number(r)-0];const h=e[1-Number(r)],o=Dt(s,this._paddingInner,this._paddingOuter);return this._step=(h-a)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),a+=(h-a-this._step*(s-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:r,start:r?a+this._step*(s-1):a,count:s},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;const i=`${t}`,e=this._getSpecifiedValue(i);if(e!==void 0)return e;let s=this._index.get(i);if(!s){if(this._unknown!==Mt)return this._unknown;s=this._domain.push(t),this._index.set(i,s)}const{count:r,start:a,reverse:h}=this._bandRangeState,o=a+(h?-1:1)*((s-1)%r)*this._step;return this._fishEyeTransform?this._fishEyeTransform(o):o}_calculateWholeRange(t,i){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;if(m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&t.length===2){const r=_e(t,[this._rangeFactorStart,this._rangeFactorEnd]);e=Math.abs(r[1]-r[0])}else e=Math.abs(t[1]-t[0]);const s=vi(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);s<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):s>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=s,this._isFixed=!1)}if(this.isBandwidthFixed()){const e=Si(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),s=Math.min((t[1]-t[0])/e,1);if(m(this._rangeFactorStart)&&m(this._rangeFactorEnd)){if(e>0){const h=t[0]-e*this._rangeFactorStart,o=h+e;this._wholeRange=[h,o]}else{const h=t[1]+e*(1-this._rangeFactorEnd),o=h-e;this._wholeRange=[o,h]}const r=this._rangeFactorStart+s<=1,a=this._rangeFactorEnd-s>=0;i==="rangeFactorStart"&&r?this._rangeFactorEnd=this._rangeFactorStart+s:i==="rangeFactorEnd"&&a?this._rangeFactorStart=this._rangeFactorEnd-s:t[0]<=t[1]?r?this._rangeFactorEnd=this._rangeFactorStart+s:a?this._rangeFactorStart=this._rangeFactorEnd-s:(this._rangeFactorStart=0,this._rangeFactorEnd=s):a?this._rangeFactorStart=this._rangeFactorEnd-s:r?this._rangeFactorEnd=this._rangeFactorStart+s:(this._rangeFactorStart=1-s,this._rangeFactorEnd=1)}else this._rangeFactorStart=0,this._rangeFactorEnd=s,this._wholeRange=[t[0],t[0]+e];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){const t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){const i=this._domain;if(m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&i.length){const e=this._getInvertIndex(t[0]),s=this._getInvertIndex(t[1]);return i.slice(Math.min(e,s),Math.max(e,s)+1)}return i}domain(t,i){return t?(super.domain(t),this.rescale(i)):super.domain()}range(t,i){return t?(this._range=[L(t[0]),L(t[1])],this.rescale(i)):this._range}rangeRound(t,i){return this._range=[L(t[0]),L(t[1])],this._round=!0,this.rescale(i)}ticks(t=10){const i=this.calculateVisibleDomain(this._range);return t===-1?i:Qt(0,i.length-1,t,!1).map(e=>i[e])}tickData(t=10){return this.ticks(t).map((i,e)=>({index:e,tick:i,value:(this.scale(i)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){const i=this.calculateVisibleDomain(this._range);return Qt(0,i.length-1,t,!0).filter(e=>e<i.length).map(e=>i[e])}stepTicks(t){const i=this.calculateVisibleDomain(this._range);return Ri(0,i.length-1,t).map(e=>i[e])}_getInvertIndex(t){let i=0;const e=this.step()/2,s=this.bandwidth()/2,r=this._domain.length,a=this.range(),h=a[0]>a[a.length-1];for(i=0;i<r;i++){const o=this.scale(this._domain[i])+s;if(i===0&&(!h&&!Pt(t,o+e)||h&&!Ht(t,o-e))||i===r-1||!Ht(t,o-e)&&!Pt(t,o+e))break}return i>=0&&i<=r-1?i:r-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,i){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(i)):this._paddingInner}paddingInner(t,i){return t!==void 0?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(i)):this._paddingInner}paddingOuter(t,i){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(i)):this._paddingOuter}step(){return this._step}round(t,i){return t!==void 0?(this._round=t,this.rescale(i)):this._round}align(t,i){return t!==void 0?(this._align=Math.max(0,Math.min(1,t)),this.rescale(i)):this._align}rangeFactor(t,i){return t?(super.rangeFactor(t),this.rescale(i)):super.rangeFactor()}rangeFactorStart(t,i){return g(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(i,"rangeFactorStart"))}rangeFactorEnd(t,i){return g(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(i,"rangeFactorEnd"))}bandwidth(t,i){return t?(t==="auto"?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(i)):this._bandwidth}maxBandwidth(t,i){return t?(this._maxBandwidth=t==="auto"?void 0:t,this.rescale(i)):this._maxBandwidth}minBandwidth(t,i){return t?(this._minBandwidth=t==="auto"?void 0:t,this.rescale(i)):this._minBandwidth}fishEye(t,i,e){return t||e?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(i)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&v(this._userBandwidth)}clone(){var t,i,e;return new At(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth((t=this._userBandwidth)!==null&&t!==void 0?t:"auto",!0).maxBandwidth((i=this._maxBandwidth)!==null&&i!==void 0?i:"auto",!0).minBandwidth((e=this._maxBandwidth)!==null&&e!==void 0?e:"auto")}}const{interpolateRgb:ft}=gi;function Fi(n,t){const i=typeof t;let e;if(g(t)||i==="boolean")return()=>t;if(i==="number")return H(n,t);if(i==="string"){if(e=k.parseColorString(t)){const s=ft(k.parseColorString(n),e);return r=>s(r).formatRgb()}return H(Number(n),Number(t))}return t instanceof T?ft(n,t):t instanceof k?ft(n.color,t.color):t instanceof Date?Ke(n,t):H(Number(n),Number(t))}class xe extends ye{constructor(t=B,i=B){super(),this._unknown=void 0,this.transformer=t,this.untransformer=i,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=B,this._piecewise=Kt,this._interpolate=Fi}calculateVisibleDomain(t){var i;return m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:(i=this._niceDomain)!==null&&i!==void 0?i:this._domain}fishEye(t,i,e){return t||e?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(i)):this._fishEyeOptions}scale(t){var i;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const e=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(e):e}invert(t){var i;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).map(this.transformer),H)),this._clamp(this.untransformer(this._input(t)))}domain(t,i){var e;if(!t)return((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const s=Array.from(t,L);return this._domain=s,this.rescale(i)}range(t,i){if(!t)return this._range.slice();const e=Array.from(t);return this._range=e,this.rescale(i)}rangeRound(t,i){const e=Array.from(t);return this._range=e,this._interpolate=Ze,this.rescale(i)}rescale(t){var i;if(t)return this;const e=(i=this._niceDomain)!==null&&i!==void 0?i:this._domain,s=e.length,r=this._range.length;let a=Math.min(s,r);if(s&&s<r&&this._forceAlign){const h=r-s+1,o=e[s-1],l=s>=2?(o-e[s-2])/h:0;for(let c=1;c<=h;c++)e[s-2+c]=o-l*(h-c);a=r}return this._autoClamp&&(this._clamp=vt(e[0],e[a-1])),this._piecewise=a>2?Ei:Kt,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,i,e){return arguments.length?(i?(this._autoClamp=!1,this._clamp=i):(this._autoClamp=!!t,this._clamp=t?void 0:B),this.rescale(e)):this._clamp!==B}interpolate(t,i){return arguments.length?(this._interpolate=t,this.rescale(i)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const i=this.ticks(t);return(i??[]).map((e,s)=>({index:s,tick:e,value:(this.scale(e)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,i){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,i){return g(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,i){return g(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}const Di=Math.sqrt(50),ki=Math.sqrt(10),Ai=Math.sqrt(2),X=[1,2,5,10],Jt=(n,t,i)=>{let e=1,s=n;const r=Math.floor((t-1)/2),a=Math.abs(n);return n>=0&&n<=Number.MIN_VALUE?s=0:n<0&&n>=-Number.MIN_VALUE?s=-(t-1):!i&&a<1?e=we(a).step:(i||a>1)&&(s=Math.floor(n)-r*e),e>0?(n>0?s=Math.max(s,0):n<0&&(s=Math.min(s,-(t-1)*e)),We(0,t).map(h=>s+h*e)):n>0?J(0,-(t-1)/e,e):J((t-1)/e,0,e)},Ii=z((n,t,i,e)=>{let s,r,a,h,o=-1;if(i=+i,(n=+n)==(t=+t))return[n];if(Math.abs(n-t)<=Number.MIN_VALUE&&i>0)return[n];if((s=t<n)&&(r=n,n=t,t=r),h=It(n,t,i).step,!isFinite(h))return[];if(h>0){let l=Math.round(n/h),c=Math.round(t/h);for(l*h<n&&++l,c*h>t&&--c,a=new Array(r=c-l+1);++o<r;)a[o]=(l+o)*h}else if(h<0&&(e!=null&&e.noDecimals)){h=1;const l=Math.ceil(n),c=Math.floor(t);if(!(l<=c))return[];for(a=new Array(r=c-l+1);++o<r;)a[o]=l+o}else{h=-h;let l=Math.round(n*h),c=Math.round(t*h);for(l/h<n&&++l,c/h>t&&--c,a=new Array(r=c-l+1);++o<r;)a[o]=(l+o)/h}return s&&a.reverse(),a}),J=(n,t,i)=>{let e,s,r=-1;if(i>0){let a=Math.floor(n/i),h=Math.ceil(t/i);for((a+1)*i<n&&++a,(h-1)*i>t&&--h,s=new Array(e=h-a+1);++r<e;)s[r]=(a+r)*i}else{i=-i;let a=Math.floor(n*i),h=Math.ceil(t*i);for((a+1)/i<n&&++a,(h-1)/i>t&&--h,s=new Array(e=h-a+1);++r<e;)s[r]=(a+r)/i}return s},Ni=(n,t,i)=>{let e;const s=n[0],r=n[n.length-1],a=t-n.length;if(r<=0){const l=[];for(e=a;e>=1;e--)l.push(s-e*i);return l.concat(n)}if(s>=0){for(e=1;e<=a;e++)n.push(r+e*i);return n}let h=[];const o=[];for(e=1;e<=a;e++)e%2==0?h=[s-Math.floor(e/2)*i].concat(h):o.push(r+Math.ceil(e/2)*i);return h.concat(n).concat(o)},tt=z((n,t,i,e)=>{let s,r,a;if(i=+i,(n=+n)==(t=+t)||Math.abs(n-t)<=Number.MIN_VALUE&&i>0)return Jt(n,i,e==null?void 0:e.noDecimals);(s=t<n)&&(a=n,n=t,t=a);const h=It(n,t,i);let o=h.step;if(!isFinite(o))return[];if(o>0){let l=1;const{power:c,gap:u}=h,f=u===10?2*10**c:1*10**c;for(;l<=5&&(r=J(n,t,o),r.length>i+1)&&i>2;)o+=f,l+=1;i>2&&r.length<i-1&&(r=Ni(r,i,o))}else e!=null&&e.noDecimals&&o<0&&(o=1),r=J(n,t,o);return s&&r.reverse(),r}),we=n=>{const t=Math.floor(Math.log(n)/Math.LN10),i=n/10**t;let e=X[0];return i>=Di?e=X[3]:i>=ki?e=X[2]:i>=Ai&&(e=X[1]),t>=0?{step:e*10**t,gap:e,power:t}:{step:-(10**-t)/e,gap:e,power:t}};function It(n,t,i){const e=(t-n)/Math.max(0,i);return we(e)}function Se(n,t,i){let e;if(i=+i,(n=+n)==(t=+t)&&i>0)return[n];if(i<=0||(e=Ci(n,t,i))===0||!isFinite(e))return[];const s=new Array(i);for(let r=0;r<i;r++)s[r]=n+r*e;return s}function Ci(n,t,i){return(t-n)/Math.max(1,i-1)}function Bi(n,t,i){let e,s,r=-1;if(i=+i,(s=(t=+t)<(n=+n))&&(e=n,n=t,t=e),!isFinite(i)||t-n<=i)return[n];const a=Math.floor((t-n)/i+1),h=new Array(a);for(;++r<a;)h[r]=n+r*i;return s&&h.reverse(),h}function dt(n,t=10){let i,e,s=0,r=n.length-1,a=n[s],h=n[r],o=10;for(h<a&&(e=a,a=h,h=e,e=s,s=r,r=e);o-- >0;){if(e=It(a,h,t).step,e===i)return n[s]=a,n[r]=h,n;if(e>0)a=Math.floor(a/e)*e,h=Math.ceil(h/e)*e;else{if(!(e<0))break;a=Math.ceil(a*e)/e,h=Math.floor(h*e)/e}i=e}}function ve(n,t){const i=v(t.forceMin),e=v(t.forceMax);let s=null;const r=[];let a=null;const h=i&&e?o=>o>=t.forceMin&&o<=t.forceMax:i?o=>o>=t.forceMin:e?o=>o<=t.forceMax:null;return i?r[0]=t.forceMin:v(t.min)&&t.min<=Math.min(n[0],n[n.length-1])&&(r[0]=t.min),e?r[1]=t.forceMax:v(t.max)&&t.max>=Math.max(n[0],n[n.length-1])&&(r[1]=t.max),v(r[0])&&v(r[1])?(a=n.slice(),a[0]=r[0],a[a.length-1]=r[1]):s=v(r[0])||v(r[1])?v(r[0])?"max":"min":"all",{niceType:s,niceDomain:a,niceMinMax:r,domainValidator:h}}const mt=(n,t,i)=>Math.abs(t-n)<1?+i.toFixed(1):Math.round(+i),Ee=z((n,t,i,e,s,r,a)=>{let h=n,o=t;const l=o<h;l&&([h,o]=[o,h]);let c,u,f=s(h),_=s(o),d=[];if(!(e%1)&&_-f<i){if(f=Math.floor(f),_=Math.ceil(_),h>0){for(;f<=_;++f)for(c=1;c<e;++c)if(u=f<0?c/r(-f):c*r(f),!(u<h)){if(u>o)break;d.push(u)}}else for(;f<=_;++f)for(c=e-1;c>=1;--c)if(u=f>0?c/r(-f):c*r(f),!(u<h)){if(u>o)break;d.push(u)}2*d.length<i&&(d=tt(h,o,i))}else d=tt(f,_,Math.min(_-f,i)).map(r);return d=d.filter(p=>p!==0),a!=null&&a.noDecimals&&(d=Array.from(new Set(d.map(p=>Math.floor(p))))),l?d.reverse():d}),Te=z((n,t,i,e,s,r)=>{const a=[],h={},o=s(n),l=s(t);let c=[];if(Number.isInteger(e))c=tt(o,l,i);else{const u=(l-o)/(i-1);for(let f=0;f<i;f++)c.push(o+f*u)}return c.forEach(u=>{const f=r(u),_=Number.isInteger(e)?mt(n,t,f):mt(n,t,pe(f)),d=mt(n,t,bi(_,[n,t]));!h[d]&&!isNaN(d)&&c.length>1&&(h[d]=1,a.push(d))}),a}),et=z((n,t,i,e,s)=>Se(e(n),e(t),i).map(r=>pe(s(r))));class Nt extends xe{constructor(){super(...arguments),this.type=w.Linear}clone(){return new Nt().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,i){const e=this.calculateVisibleDomain(this._range);return Ii(e[0],e[e.length-1],t,i)}ticks(t=10,i){var e;if(ne(i==null?void 0:i.customTicks))return i.customTicks(this,t);if(m(this._rangeFactorStart)&&m(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(t,i);const s=(e=this._niceDomain)!==null&&e!==void 0?e:this._domain,r=this._domain,a=s[0],h=s[s.length-1];let o=tt(r[0],r[r.length-1],t,i);if(!o.length)return o;if(this._domainValidator)o=o.filter(this._domainValidator);else if((o[0]!==a||o[o.length-1]!==h)&&this._niceType){const l=s.slice();if(this._niceType==="all"?(l[0]=o[0],l[l.length-1]=o[o.length-1],this._niceDomain=l,this.rescale()):this._niceType==="min"&&o[0]!==a?(l[0]=o[0],this._niceDomain=l,this.rescale()):this._niceType==="max"&&o[o.length-1]!==h&&(l[l.length-1]=o[o.length-1],this._niceDomain=l,this.rescale()),this._niceType!=="all"){const c=Math.min(l[0],l[l.length-1]),u=Math.max(l[0],l[l.length-1]);o=o.filter(f=>f>=c&&f<=u)}}return o}forceTicks(t=10){const i=this.calculateVisibleDomain(this._range);return Se(i[0],i[i.length-1],t)}stepTicks(t){const i=this.calculateVisibleDomain(this._range);return Bi(i[0],i[i.length-1],t)}nice(t=10,i){var e,s;const r=this._domain;let a=[];if(i){const h=ve(r,i);if(a=h.niceMinMax,this._domainValidator=h.domainValidator,this._niceType=h.niceType,h.niceDomain)return this._niceDomain=h.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const h=dt(r.slice(),t);this._niceType==="min"?h[h.length-1]=(e=a[1])!==null&&e!==void 0?e:h[h.length-1]:this._niceType==="max"&&(h[0]=(s=a[0])!==null&&s!==void 0?s:h[0]),this._niceDomain=h,this.rescale()}return this}niceMin(t=10){this._niceType="min";const i=this._domain[this._domain.length-1],e=dt(this.domain(),t);return e&&(e[e.length-1]=i,this._niceDomain=e,this.rescale()),this}niceMax(t=10){this._niceType="max";const i=this._domain[0],e=dt(this._domain.slice(),t);return e&&(e[0]=i,this._niceDomain=e,this.rescale()),this}}class be{nice(t=10,i){var e,s,r,a;const h=this._domain;let o=[],l=null;if(i){const c=ve(h,i);if(o=c.niceMinMax,this._domainValidator=c.domainValidator,l=c.niceType,c.niceDomain)return this._niceDomain=c.niceDomain,this.rescale(),this}else l="all";if(l){const c=Ti(h.slice(),(s=(e=this.getNiceConfig)===null||e===void 0?void 0:e.call(this))!==null&&s!==void 0?s:{floor:u=>Math.floor(u),ceil:u=>Math.ceil(u)});return l==="min"?c[c.length-1]=(r=o[1])!==null&&r!==void 0?r:c[c.length-1]:l==="max"&&(c[0]=(a=o[0])!==null&&a!==void 0?a:c[0]),this._niceDomain=c,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const i=this._domain.slice();return this._domain&&(i[i.length-1]=t,this._niceDomain=i,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const i=this._domain.slice();return this._domain&&(i[0]=t,this._niceDomain=i,this.rescale()),this}}function te(n){return t=>-n(-t)}function ee(n=Number.EPSILON){return t=>Math.max(t,n)}function Oi(n=Number.EPSILON){return t=>Math.min(t,-n)}class Ct extends xe{constructor(){super(Gt(10),Xt(10)),this.type=w.Log,this._limit=ee(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new Ct().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var i;if(t)return this;super.rescale();const e=Gt(this._base),s=Xt(this._base);return((i=this._niceDomain)!==null&&i!==void 0?i:this._domain)[0]<0?(this._logs=te(e),this._pows=te(s),this._limit=Oi(),this.transformer=Mi,this.untransformer=xi):(this._logs=e,this._pows=s,this._limit=ee(),this.transformer=this._logs,this.untransformer=s),this}scale(t){var i;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((i=this._niceDomain)!==null&&i!==void 0?i:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const e=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(e):e}base(t,i){return arguments.length?(this._base=t,this.rescale(i)):this._base}tickFormat(){return B}d3Ticks(t=10,i){const e=this.domain(),s=this._limit(e[0]),r=this._limit(e[e.length-1]);return Ee(s,r,t,this._base,this.transformer,this.untransformer,i)}ticks(t=10){const i=this.calculateVisibleDomain(this._range);return Te(this._limit(i[0]),this._limit(i[i.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const i=this.calculateVisibleDomain(this._range);return et(i[0],i[i.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const i=this.calculateVisibleDomain(this._range);return et(this._limit(i[0]),this._limit(i[i.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}oe(Ct,be);class Hn extends At{constructor(t){super(!1),this.type=w.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}class Bt extends Nt{constructor(){super(Yt(1),Zt(1)),this.type=w.Symlog,this._const=1}clone(){return new Bt().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,i){return arguments.length?(this._const=t,this.transformer=Yt(t),this.untransformer=Zt(t),this.rescale(i)):this._const}d3Ticks(t=10,i){const e=this.domain(),s=e[0],r=e[e.length-1];return Ee(s,r,t,this._const,this.transformer,this.untransformer,i)}ticks(t=10){const i=this.calculateVisibleDomain(this._range);return Te(i[0],i[i.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){const i=this.calculateVisibleDomain(this._range);return et(i[0],i[i.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const i=this.calculateVisibleDomain(this._range);return et(i[0],i[i.length-1],t,this.transformer,this.untransformer)}}oe(Bt,be);export{hn as $,vn as A,on as B,ti as C,ei as D,Et as E,ce as F,v as G,Q as H,g as I,k as J,Tn as K,E as L,G as M,Pi as N,En as O,Tt as P,Hi as Q,rt as R,an as S,N as T,bn as U,An as V,li as W,Gi as X,oi as Y,j as Z,fn as _,qe as a,yn as a$,nt as a0,Mn as a1,wn as a2,kn as a3,Wi as a4,dn as a5,wt as a6,Ve as a7,Ji as a8,Ye as a9,$e as aA,Rt as aB,pt as aC,kt as aD,Hn as aE,At as aF,ae as aG,_i as aH,Ft as aI,Nn as aJ,Fn as aK,Vn as aL,D as aM,On as aN,Ui as aO,Si as aP,Ct as aQ,Bt as aR,ln as aS,cn as aT,_n as aU,mn as aV,Ki as aW,Zi as aX,We as aY,vt as aZ,Dn as a_,Qi as aa,Rn as ab,fi as ac,Wt as ad,zi as ae,xn as af,gn as ag,He as ah,pn as ai,Pt as aj,Ht as ak,fe as al,ze as am,ji as an,hi as ao,oe as ap,tn as aq,Lt as ar,Nt as as,Ln as at,Pn as au,w as av,je as aw,Bn as ax,Xi as ay,$i as az,se as b,Yi as b0,Cn as b1,In as b2,De as b3,ai as c,P as d,re as e,xt as f,it as g,Re as h,m as i,b as j,q as k,K as l,sn as m,un as n,zt as o,Sn as p,rn as q,ni as r,nn as s,L as t,en as u,U as v,le as w,ne as x,qi as y,Li as z};
